# Binding Visualizer Module

## Overview

The Binding Visualizer module is designed to fetch and visualize Protein Data Bank (PDB) structures using the `py3Dmol` library. This module consists of a Python script, a configuration file, and an HTML file for visualization output.

## Components

### 1. Python Script (`binding_visualizer.py`)

This script contains the main logic for fetching PDB data and visualizing it. The key functions and their purposes are:

- **`fetch_pdb_data(pdb_id)`**: Fetches PDB data for a given PDB ID from the RCSB PDB database.
  - **Arguments**: `pdb_id` (str) - The PDB ID of the structure to be fetched.
  - **Returns**: PDB file data as a string if the request is successful.
  - **Raises**: `requests.exceptions.RequestException` if an error occurs during the request.

- **`visualize_structure(pdb_data, width, height, chain_style, residue_style, output_html)`**: Visualizes the PDB structure using `py3Dmol`.
  - **Arguments**:
    - `pdb_data` (str) - The PDB data string that contains the molecular structure.
    - `width` (int) - Width of the viewer window.
    - `height` (int) - Height of the viewer window.
    - `chain_style` (dict) - Visualization style for the chain.
    - `residue_style` (dict) - Visualization style for the residue.
    - `output_html` (str) - Path to the output HTML file to save the visualization.

- **`main()`**: The main function to execute the PDB data fetching and visualization workflow.
  - Initializes logging configuration.
  - Fetches the PDB data using `fetch_pdb_data`.
  - Visualizes the data using `visualize_structure`.
  - Handles any exceptions, logs errors, and prints a traceback for debugging.

### 2. Configuration File (`binding_visualizer.yaml`)

This YAML file contains configuration settings for the module. The settings include:

- **`pdb_id`**: The PDB ID of the structure to be visualized.
- **`viewer`**: Settings for the viewer dimensions.
  - `width`: Width of the viewer window.
  - `height`: Height of the viewer window.
- **`visualization`**: Visualization styles for different parts of the molecule.
  - `chain_style`: Visualization style for the chain.
  - `residue_style`: Visualization style for the residue.

### 3. HTML File (`5LF3_structure_viewer.html`)

This HTML file is generated by the `visualize_structure` function and contains the visualization of the PDB structure. It includes:

- A `div` element to hold the 3Dmol.js viewer.
- A script to load the 3Dmol.js library and initialize the viewer with the specified PDB data and styles.

## Workflow

1. **Configuration Loading**: The script loads configuration settings from the `binding_visualizer.yaml` file.
2. **PDB Data Fetching**: The `fetch_pdb_data` function fetches the PDB data for the specified PDB ID.
3. **Structure Visualization**: The `visualize_structure` function visualizes the fetched PDB data using `py3Dmol` and saves the output as an HTML file.
4. **Error Handling**: Any exceptions during the workflow are logged, and a traceback is printed for debugging.

## Usage

To use the Binding Visualizer module, follow these steps:

1. Ensure that the required libraries (`py3Dmol`, `requests`, `colorama`, `yaml`) are installed.
2. Update the `binding_visualizer.yaml` file with the desired PDB ID and visualization settings.
3. Run the `binding_visualizer.py` script to fetch and visualize the PDB structure.
4. Open the generated HTML file in a web browser to view the visualization.

```bash
python binding_visualizer.py
```

## Conclusion

The Binding Visualizer module provides a streamlined way to fetch and visualize PDB structures using `py3Dmol`. By configuring the settings in the YAML file, users can customize the visualization to suit their needs.
